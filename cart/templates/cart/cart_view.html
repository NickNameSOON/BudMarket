{% extends "market/base.html" %}

{% block content %}
    <div class="container mx-auto mt-10">
        {% if cart_items %}
            <div class="overflow-hidden shadow-md mt-2 mb-6">
                <div class="px-6 py-4 bg-white border-b border-gray-200 font-bold uppercase">
                    <h1 class="text-center text-4xl">Ваш Кошик</h1>
                </div>
                {% for cart_item in cart_items %}
                    <div class="p-6 bg-white border-b border-gray-200">
                        <div class="flex flex-col md:flex-row justify-between mt-4 items-center">
                            <div class="mb-4 md:mb-0 flex items-center shadow-sm">
                                <img class="w-full h-48 object-cover" src="{{ cart_item.product.image.url }}"
                                     alt="{{ cart_item.product.title }}">
                                <div>
                                    <h3 class="text-xl font-bold">{{ cart_item.product.title }}</h3>
                                    <p>{{ cart_item.product.description }}</p>
                                </div>
                            </div>
                            <div class="flex items-center">
                                <form action="{% url 'cart:update_cart' cart_item.id %}" method="post"
                                      class="flex items-center">
                                    {% csrf_token %}
                                    <p class="">Ціна :{{ cart_item.product.price }} грн.</p>
                                    <p>Кількість : </p>
                                    <input type="number" name="quantity" value="{{ cart_item.quantity }}" min="1"
                                           class="form-input focus:outline mr-2"/>
                                    <button class="bg-green-500 hover:bg-green-700 text-white font-bold py-2 px-4 rounded"
                                            type="submit">
                                        Оновити
                                    </button>
                                </form>
                                <a href="{% url 'cart:remove_from_cart' product_id=cart_item.product.id %}"
                                   class="ml-4 bg-red-500 hover:bg-red-700 text-white font-bold py-2 px-4 rounded">
                                    Видалити
                                </a>
                            </div>
                        </div>
                    </div>
                {% endfor %}
            </div>
            <div class="text-right font-bold text-xl mt-6 mb-6">Загальна ціна: {{ total_price }} грн.</div>
            <form action="{% url 'order:order-confirm' %}" method="get" class="text-right ml-4 mb-6 mt-4">
                {% csrf_token %}
                <button class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 mt-2 px-4 rounded" type="submit">
                    Оформити замовлення
                </button>
            </form>
    </div>
        {% else %}
            <div class="text-center text-3xl text-gray-500 m-10">Ваш кошик пустий.</div>
        {% endif %}
{% endblock %}
