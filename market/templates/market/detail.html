<!DOCTYPE html>
{% extends "market/base.html" %}
{% load humanize %}

<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>{{ product.name }}</title>
</head>
<body>
{% block content %}
   <div class="flex p-10 w-full h-200px">
      <img class="w-1/3 h-1/3" src="{{ product.image.url }}" alt="ProductPhoto">
      <div class="w-2/3 text-xl ml-10 mt-5">
       <p class="mt-5">{{ product.title }}</p>
       <p class="mt-5 text-gray-600">Виробник : {{ product.brand }}</p>
       <p class="mt-5 text-green-500">{{ product.price | intcomma }} грн.</p>
       <p class="mt-5 text-gray-600">{{ product.description }}</p>
          <div>
          <button class="bg-green-500 text-white mt-[50px]"><a href="{% url 'market:update_product' product.id %}">Update</a></button>
          <button class="bg-green-500 text-white mt-[50px]" type="button" id="add-button" value="">Додати в кошик</button>
          <button class="bg-green-500 text-white mt-[50px]" type="button" id="add-button" value="">Купити</button>
          <button class="bg-red-500 text-black mt-[50px]"><a href="{% url 'market:delete_product' product.id %}">Delete</a></button>
          </div>    
      </div>
   </div>
    <script>
    $(document).on('click','#add-button', function (e){
        e.preventDefault();
        
        $.ajax({
            type:'Post',
            url: '(%url "catd:add_to_cart" %)',
            data: {
                product_id: $('add-button').val(),
                product_qty: $('#select option:selected').text(),
                csrfmiddlewaretoken: '{{ csrf_token }}',
                action: 'post'
            },
            success: function (responce){
                console.log(responce)
            },
            error: function (responce){
                console.log(error)
            }
        })
    })
    </script>
{% endblock content %}
</body>
</html>
