<!DOCTYPE html>
{% extends "market/base.html" %}
{% load static %}

{% block content %}
    
<div class="mt-10 mx-auto max-w-7xl px-4 sm:mt-10 sm:px-7 md:mt-12 lg:mt-16 lg:px-4 xl:mt-20 grid gap-4 grid-cols-2">
        {% if categories %}
            <form method="get" action="{% url 'market:catalog' %}">
                <label class="text-2xl">Оберіть категорію:</label><br>
                <div>
                {% for c in categories %}
                    <input type="radio" id="{{ c.slug }}" name="category" value="{{ c.slug }}">
                    <label for="{{ c.slug }}">{{ c.name }}</label><br>
                {% endfor %}
                </div>
                <button class="bg-green-500 text-white" type="submit">Фільтрувати</button>
            </form>
        {% endif %}
    </div>
<main class="mt-10 mx-auto max-w-7xl px-4 sm:mt-12 sm:px-6 md:mt-16 lg:mt-20 lg:px-8 xl:mt-28">
    <div class="sm:text-center lg:text-left">
        {% if category %}
            <h2 class="text-4xl font-extrabold text-gray-900 sm:text-5xl md:text-6xl">{{ category.name }}</h2>
        {% else %}
            <h2 class="text-4xl font-extrabold text-gray-900 sm:text-5xl md:text-6xl">Всі товари</h2>
        {% endif %}
    </div>
<div class="sm:text-center lg:text-left">
    <form method="get" action="{% url 'market:catalog' %}">
        <label for="sort">Сортувати за:</label>
        <select name="sort" id="sort">
            <option value="">Без сортування</option>
            <option value="min_price">Мінімальна ціна</option>
            <option value="max_price">Максимальна ціна</option>
        </select>
        <button type="submit">Застосувати</button>
    </form>
</div>
    <div class="p-10 grid grid-cols-1 sm:grid-cols-1 md:grid-cols-3 xl:grid-cols-3 lg:grid-cols-5">
        {% for product in products %}
            {% if category %}
                {% if product.category.slug == category.slug %}
                    <a href="{% url 'market:detail' product.id %}">
                        <div class="rounded overflow-hidden shadow-lg">
                            <img class="w-600px h-800px" src="{{ product.image.url }}" alt="">
                            <div class="px-6 py-4">
                                <p class="font-bold text-xl mb-2">{{ product.title }}</p>
                            <p class="font-bold text-lg text-indigo-500 mb-2">Виробник : {{ product.brand }}</p>
                                <p class="font-bold text-xl text-green-500 mb-2">{{ product.price }} ₴</p>
                            </div>
                        </div>
                    </a>
                {% endif %}
            {% else %}
                <a href="{% url 'market:detail' product.id %}">
                    <div class="rounded overflow-hidden shadow-lg">
                        <img class="w-600px h-800px" src="{{ product.image.url }}" alt="">
                        <div class="px-6 py-4">
                            <p class="font-bold text-xl mb-2">{{ product.title }}</p>
                            <p class="font-bold text-lg text-indigo-500 mb-2">Виробник : {{ product.brand }}</p>
                            <p class="font-bold text-xl text-green-500 mb-2">{{ product.price }} ₴</p>
                        </div>
                    </div>
                </a>
            {% endif %}
        {% empty %}
            <li class="text-4xl font-extrabold text-gray-900 sm:text-5xl md:text-6xl">No products found</li>
        {% endfor %}
    </div>
</main>

{% endblock content %}
