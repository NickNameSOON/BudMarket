{% extends "market/base.html" %}

{% block title %}Профіль користувача{% endblock %}

{% block content %}
    {% if user.profile %}
        <div class="grid p-10 grid-cols-2 lg:grid-cols-3 sm:grid-cols-1">
            <div class="rounded shadow-lg">
                <div>
                    <h1 class="text-4xl">Профіль користувача :</h1>
                </div>
                <div>
                    <h1 class="font-bold text-xl m-2">{{ user.username }}</h1>
                    <h1>Номер телефону : {{ user.profile.contactNumber }}</h1>
                    <h1>Імя : {{ user.profile.firstName }}</h1>
                    <h1>Прізвище : {{ user.profile.lastName }}</h1>
                    <h1>email: {{ user.profile.email }}</h1>
                    <address>Збережена адреса доставки : {{ user.profile.DeliveryAddress }}</address>
                    <a href="{% url 'users:update-profile' %}">Оновити дані профілю</a>
                </div>
            </div>
            <div class="rounded shadow-lg">
                <h1 class="text-4xl">Активні замовлення :</h1>
                {% if active_orders %}
                    <ul>
                        {% for order in active_orders %}
                            <a href="{% url 'order:order-detail' order.id %}">
                                <strong>Замовлення №{{ order.id }}</strong><br>
                                <ul>
                                    {% for item in order.orderitem_set.all %}
                                        <li>
                                            {{ item.product.title }} -
                                            Ціна: {{ item.price }} грн. -
                                            Кількість: {{ item.quantity }} -
                                            Сума: {{ item.price|floatformat:"2" }} грн.
                                        </li>
                                    {% endfor %}
                                </ul>
                            </a>
                        {% endfor %}
                    </ul>
                {% else %}
                    <p>Активних замовлень немає</p>
                {% endif %}
            </div>
            <div class="rounded shadow-lg">
                <h1 class="text-4xl">Неактивні замовлення :</h1>
                {% if inactive_orders %}
                    {% for order in inactive_orders %}
                        <a href="{% url 'order:order-detail' order.id %}"><strong>Замовлення
                            №{{ order.id }}</strong><br>
                            <ul>
                                {% for item in order.orderitem_set.all %}
                                    <li>
                                        {{ item.product.title }}-
                                        Ціна: {{ item.price }} грн. -
                                        Кількість: {{ item.quantity }} -
                                        Сума: {{ item.price|floatformat:"2" }} грн.
                                    </li>
                                {% endfor %}
                            </ul>
                        </a>
                    {% endfor %}
                {% else %}
                    <p>Неактивних замовлень немає</p>
                {% endif %}
            </div>
        </div>
    {% else %}
        <form action="" method="post">
            <h1>Form Profile</h1>
        </form>
    {% endif %}

    <button class="bg-transparent hover:bg-red-500 text-red-700 font-semibold hover:text-white py-2 px-4 border border-red-500 hover:border-transparent rounded" href="{% url 'users:logout' %}">Вийти з акаунту</button>

{% endblock %}
